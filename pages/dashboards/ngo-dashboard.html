<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><title>NGO Dashboard</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"></head>
<body style="background:url('https://images.freecreatives.com/wp-content/uploads/2016/04/Free-Website-BAckgrounds1.jpg') no-repeat center center fixed; background-size:cover;">
<script src="../../js/app.js"></script>
<nav class="navbar navbar-expand-lg navbar-dark bg-success">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">NGO Connect</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#dqNav"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="dqNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link text-white" href="#" id="navPost">Create/Manage Posts</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="#" id="navEngagement">Engagement</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="#" id="navLogs">Donation Logs</a></li>
      </ul>
      <div class="d-flex align-items-center"><span class="text-white me-3" id="userInfo"></span><button onclick="logout()" class="btn btn-light btn-sm">Logout</button></div>
    </div>
  </div>
</nav>
<div class="container my-4 text-white" id="mainContent"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const user = JSON.parse(localStorage.getItem('loggedInUser'));
if (!user || user.role !== 'ngo') location = '../auth/ngo-login.html';
document.getElementById('userInfo').innerText = `NGO | ${user.name}`;

function renderPost(){
  mainContent.innerHTML = `
    <h3>Post New Campaign/Event</h3>
    <div class="mb-3"><input id="campTitle" class="form-control" placeholder="Title"></div>
    <div class="mb-3"><textarea id="campDesc" class="form-control" placeholder="Details"></textarea></div>
    <button id="submitCamp" class="btn btn-outline-light">Submit</button>`;
  document.getElementById('submitCamp').onclick = () => {
    DB.campaigns.push({ title: campTitle.value.trim(), desc: campDesc.value.trim(), ngo: user.name });
    saveDB();
    alert('Posted successfully.');
    renderLogs();
  };
}
function renderEngagement(){
  const my = DB.campaigns.filter(c => c.ngo === user.name);
  mainContent.innerHTML = `<h3>My Campaigns</h3>${my.map(c => `<div class="card mb-2 p-2 text-dark"><h5>${c.title}</h5><p>${c.desc}</p></div>`).join('')}`;
}
function renderLogs(){
  const logs = DB.donations.filter(d => d.ngo === user.name);
  mainContent.innerHTML = `<h3>Donation Logs</h3>${logs.map(d => `<div class="card mb-2 p-2 text-dark">Donor: ${d.donor}<br>Campaign: ${d.campaign}<br>â‚¹${d.amount}</div>`).join('')}`;
}

navPost.onclick = renderPost;
navEngagement.onclick = renderEngagement;
navLogs.onclick = renderLogs;
renderPost();

function logout(){
  localStorage.removeItem('loggedInUser');
  location = '../auth/select-login.html';
}
</script>
</body></html>
